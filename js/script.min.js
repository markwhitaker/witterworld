"use strict";$((function(){const t=["#00C4F0","#00BCE5","#00B3DB","#00ABD1","#00A3C7"],o={FLAG:"National flag of {0}",POSTER:"Film poster for {0}"},e={FLAG:"https://flagpedia.net/data/flags/vector/{0}.svg",IMDB:"https://www.imdb.com/title/{0}/",JUST_WATCH:"https://www.justwatch.com/uk/movie/{0}",LETTERBOXD:"https://letterboxd.com/film/{0}/",ROTTEN_TOMATOES:"https://www.rottentomatoes.com/m/{0}",WIKIPEDIA:"https://en.wikipedia.org/wiki/{0}",YOUTUBE:"https://www.youtube.com/watch?v={0}"};let i,r={},n=[];var a;function l(){i=new jvm.Map({map:"world_merc",container:$("#map"),backgroundColor:"#f0f0f0",zoomMin:.9,focusOn:{x:.5,y:.5,scale:.95},series:{regions:[{attribute:"fill"}]},onRegionClick:function(t,o){s(o)},onRegionTipShow:function(t,o,e){let i=r[e];i&&o.text("{0}: {1} ({2})".format(i.country,i.title,i.year))}}),i.series.regions[0].setValues(function(){let t={};for(let o in i.regions)t[o]=r[o]?r[o].colour:"#555555";return t}())}function s(t){let i=r[t];i&&($("#filmCountry").text(i.country),$("#filmTitle").text(i.title),$("#filmYear").text(i.year),$("#filmCountryFlag").prop({src:e.FLAG.format(i.countryCode.toLowerCase()),alt:o.FLAG.format(i.country)}),$("#filmImageContainer").toggleClass("defaultImage",!i.image),$("#filmImage").prop({src:i.image,alt:o.POSTER.format(i.title)}).toggle(!!i.image),$("#filmOriginalTitle").text(i.originalTitle).toggle(!!i.originalTitle),$("#imdbLink").prop({href:e.IMDB.format(i.imdb)}).toggle(!!i.imdb),$("#letterboxdLink").prop({href:e.LETTERBOXD.format(i.letterboxd)}).toggle(!!i.letterboxd),$("#rottenTomatoesLink").prop({href:e.ROTTEN_TOMATOES.format(i.rottenTomatoes)}).toggle(!!i.rottenTomatoes),$("#wikipediaLink").prop({href:e.WIKIPEDIA.format(i.wikipedia)}).toggle(!!i.wikipedia),$("#justwatchLink").prop({href:e.JUST_WATCH.format(i.justwatch)}).toggle(!!i.justwatch),$("#trailerLink").prop({href:e.YOUTUBE.format(i.trailer)}).toggle(!!i.trailer),$("#reviewLink").prop({href:e.YOUTUBE.format(i.review)}).toggle(!!i.review),$("#filmReviewer").text(i.reviewer),$("#filmDetailsModal").modal())}$("a").prop("target","_blank"),$("#btnShowMap").click((function(){$("#btnShowMap").addClass("selected"),$("#mapContainer").show(),l(),$("#btnShowList").removeClass("selected"),$("#listContainer").hide()})),$("#btnShowList").click((function(){$("#btnShowList").addClass("selected"),$("#listContainer").show(),i.remove(),i=void 0,$("#btnShowMap").removeClass("selected"),$("#mapContainer").hide()})),$("#filmCountryFlag").on({error:function(){$(this).hide()},load:function(){$(this).show()}}),a=function(){!function(t,o,e,i){let r=20,n=function(t){e(t),t<o?(r*=t<o-10?1:1.3,setTimeout((function(){n(t+1)}),r)):i()};n(t)}(1,n.length,(function(t){$("#filmCount").text(t)}),(function(){$("#filmCount").addClass("done")})),l(),$("#list").empty(),n.forEach((function(t){$("<span></span>").addClass("listFilm").prop({title:"{0} ({1})".format(t.title,t.year),style:"background-color: {0}".format(t.colour)}).text(t.country).click((function(){s(t.countryCode)})).appendTo("#list")}))},n=[],r={},$.getJSON("data/films.json",(function(o){o.forEach((function(o){o.colour=function(){let o=Math.floor(Math.random()*t.length);return t[o]}(),r[o.countryCode]=o})),n=o.sort((function(t,o){return t.country<o.country?-1:t.country>o.country?1:0})),a()})),String.prototype.format=function(){let t=this;for(let o=0;o<arguments.length;o++)t=t.replace("{"+o+"}",arguments[o]);return t}}));