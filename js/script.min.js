"use strict";$((function(){const t=["#00C4F0","#00BCE5","#00B3DB","#00ABD1","#00A3C7"],o="https://www.youtube.com/watch?v={0}";let e,i={},n=[];var r;function l(){e=new jvm.Map({map:"world_merc",container:$("#map"),backgroundColor:"#f0f0f0",zoomMin:.9,focusOn:{x:.5,y:.5,scale:.95},series:{regions:[{attribute:"fill"}]},onRegionClick:function(t,o){f(o)},onRegionTipShow:function(t,o,e){let n=i[e];n&&o.text("{0}: {1} ({2})".format(n.country,n.title,n.year))}}),e.series.regions[0].setValues(function(){let t={};for(let o in e.regions)t[o]=i[o]?i[o].colour:"#555555";return t}())}function a(){e&&(e.remove(),e=void 0)}function c(t){$(t).addClass("selected").siblings().removeClass("selected")}function s(t){$(t).show().siblings().hide()}function f(t){let e=i[t];e&&($("#filmCountry").text(e.country),$("#filmTitle").text(e.title),$("#filmYear").text(e.year),$("#filmCountryFlag").prop({src:"https://flagpedia.net/data/flags/vector/{0}.svg".format(e.countryCode.toLowerCase()),alt:"National flag of {0}".format(e.country)}),$("#filmImageContainer").toggleClass("defaultImage",!e.image),$("#filmImage").prop({src:e.image,alt:"Film poster for {0}".format(e.title)}).toggle(!!e.image),$("#filmOriginalTitle").text(e.originalTitle).toggle(!!e.originalTitle),u("#imdbLink","https://www.imdb.com/title/{0}/",e.imdb),u("#letterboxdLink","https://letterboxd.com/film/{0}/",e.letterboxd),u("#rottenTomatoesLink","https://www.rottentomatoes.com/m/{0}",e.rottenTomatoes),u("#wikipediaLink","https://en.wikipedia.org/wiki/{0}",e.wikipedia),u("#justwatchLink","https://www.justwatch.com/uk/movie/{0}",e.justwatch),u("#trailerLink",o,e.trailer),u("#reviewLink",o,e.review),$("#filmReviewer").text(e.reviewer),$("#filmDetailsModal").modal())}function u(t,o,e){$(t).prop({href:o.format(e)}).toggle(!!e)}$("a").prop("target","_blank"),$("#btnShowMap").click((function(){c("#btnShowMap"),s("#sectionMap"),l()})),$("#btnShowList").click((function(){c("#btnShowList"),s("#sectionList"),a()})),$("#btnShowAbout").click((function(){c("#btnShowAbout"),s("#sectionAbout"),a()})),$("#filmCountryFlag").on({error:function(){$(this).hide()},load:function(){$(this).show()}}),r=function(){$("#filmCount").text(n.length),l(),$("#list").empty(),n.forEach((function(t){$("<span></span>").addClass("listFilm").prop({title:"{0} ({1})".format(t.title,t.year),style:"background-color: {0}".format(t.colour)}).text(t.country).click((function(){f(t.countryCode)})).appendTo("#list")}))},n=[],i={},$.getJSON("data/films.json",(function(o){o.forEach((function(o){o.colour=function(){let o=Math.floor(Math.random()*t.length);return t[o]}(),i[o.countryCode]=o})),n=o.sort((function(t,o){return t.country<o.country?-1:t.country>o.country?1:0})),r()})),String.prototype.format=function(){let t=this;for(let o=0;o<arguments.length;o++)t=t.replace("{"+o+"}",arguments[o]);return t}}));